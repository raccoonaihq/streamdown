"use strict";"use client";var rn=Object.create;var ke=Object.defineProperty;var an=Object.getOwnPropertyDescriptor;var sn=Object.getOwnPropertyNames;var ln=Object.getPrototypeOf,cn=Object.prototype.hasOwnProperty;var dn=(e,t)=>{for(var n in t)ke(e,n,{get:t[n],enumerable:!0})},Fe=(e,t,n,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of sn(t))!cn.call(e,r)&&r!==n&&ke(e,r,{get:()=>t[r],enumerable:!(o=an(t,r))||o.enumerable});return e};var de=(e,t,n)=>(n=e!=null?rn(ln(e)):{},Fe(t||!e||!e.__esModule?ke(n,"default",{value:e,enumerable:!0}):n,e)),un=e=>Fe(ke({},"__esModule",{value:!0}),e);var Qn={};dn(Qn,{ControlsContext:()=>ve,MermaidConfigContext:()=>Te,ShikiThemeContext:()=>Me,Streamdown:()=>on,StreamdownRuntimeContext:()=>J,defaultRehypePlugins:()=>en,defaultRemarkPlugins:()=>tn});module.exports=un(Qn);var U=require("react"),Vt=de(require("react-markdown"),1),Yt=de(require("rehype-katex"),1),Jt=de(require("rehype-raw"),1),Kt=de(require("remark-gfm"),1),Zt=de(require("remark-math"),1),Bo=require("katex/dist/katex.min.css"),Qt=require("rehype-harden");var x=require("react");var ue=require("lucide-react"),z=require("react"),be=require("shiki"),Ke=require("shiki/engine/javascript");var Ve=require("clsx"),Ye=require("tailwind-merge"),k=(...e)=>(0,Ye.twMerge)((0,Ve.clsx)(e)),te=(e,t,n)=>{let o=typeof t=="string"?new Blob([t],{type:n}):t,r=URL.createObjectURL(o),a=document.createElement("a");a.href=r,a.download=e,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r)},$e=async(e,t=2)=>{let n=e.cloneNode(!0),o=e.getBoundingClientRect(),r=e.getAttribute("viewBox"),a=o.width||e.clientWidth,i=o.height||e.clientHeight;if((!a||!i)&&r){let f=r.split(/\s+|,/).map(Number);f.length===4&&(a=f[2],i=f[3])}a||(a=800),i||(i=600),n.setAttribute("width",`${a}`),n.setAttribute("height",`${i}`),n.getAttribute("viewBox")||n.setAttribute("viewBox",`0 0 ${a} ${i}`),n.hasAttribute("xmlns")||n.setAttribute("xmlns","http://www.w3.org/2000/svg");let l=new XMLSerializer().serializeToString(n),s=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(l)}`,c=new Image;c.src=s,await new Promise((f,h)=>{c.onload=f,c.onerror=v=>{h(new Error(`Failed to load SVG image: ${v}`))}});let d=document.createElement("canvas");d.width=a*t,d.height=i*t;let m=d.getContext("2d");if(!m)throw new Error("Failed to get canvas context");return m.scale(t,t),m.drawImage(c,0,0,a,i),new Promise((f,h)=>{d.toBlob(v=>{v?f(v):h(new Error("Failed to create blob"))},"image/png")})};var q=require("react/jsx-runtime"),mn=/<pre(\s|>)/,Re=(0,z.createContext)({code:""}),He=class{constructor(){this.lightHighlighter=null;this.darkHighlighter=null;this.lightTheme=null;this.darkTheme=null;this.loadedLanguages=new Set;this.initializationPromise=null}isLanguageSupported(t){return Object.hasOwn(be.bundledLanguages,t)}getFallbackLanguage(){return"text"}async ensureHighlightersInitialized(t,n){var d,m;let[o,r]=t,a=(0,Ke.createJavaScriptRegexEngine)({forgiving:!0}),i=!this.lightHighlighter||this.lightTheme!==o,l=!this.darkHighlighter||this.darkTheme!==r;(i||l)&&this.loadedLanguages.clear();let s=this.isLanguageSupported(n),c=!this.loadedLanguages.has(n)&&s;if(i?(this.lightHighlighter=await(0,be.createHighlighter)({themes:[o],langs:s?[n]:[],engine:a}),this.lightTheme=o,s&&this.loadedLanguages.add(n)):c&&await((d=this.lightHighlighter)==null?void 0:d.loadLanguage(n)),l){let f=c?[...this.loadedLanguages].concat(s?[n]:[]):Array.from(this.loadedLanguages);this.darkHighlighter=await(0,be.createHighlighter)({themes:[r],langs:f.length>0?f:s?[n]:[],engine:a}),this.darkTheme=r}else c&&await((m=this.darkHighlighter)==null?void 0:m.loadLanguage(n));c&&this.loadedLanguages.add(n)}async highlightCode(t,n,o,r){var m,f;this.initializationPromise&&await this.initializationPromise,this.initializationPromise=this.ensureHighlightersInitialized(o,n),await this.initializationPromise,this.initializationPromise=null;let[a,i]=o,l=this.isLanguageSupported(n)?n:this.getFallbackLanguage(),s=(m=this.lightHighlighter)==null?void 0:m.codeToHtml(t,{lang:l,theme:a}),c=(f=this.darkHighlighter)==null?void 0:f.codeToHtml(t,{lang:l,theme:i}),d=h=>!h||!r?h!=null?h:"":h.replace(mn,`<pre class="${r}"$1`);return[d(s),d(c)]}},pn=new He,Ze=({code:e,language:t,className:n,children:o,preClassName:r,...a})=>{let[i,l]=(0,z.useState)(""),[s,c]=(0,z.useState)(""),d=(0,z.useRef)(!1),[m,f]=(0,z.useContext)(Me);return(0,z.useEffect)(()=>(d.current=!0,pn.highlightCode(e,t,[m,f],r).then(([h,v])=>{d.current&&(l(h),c(v))}),()=>{d.current=!1}),[e,t,m,f,r]),(0,q.jsx)(Re.Provider,{value:{code:e},children:(0,q.jsxs)("div",{className:"my-4 w-full overflow-hidden rounded-xl border","data-code-block-container":!0,"data-language":t,children:[(0,q.jsxs)("div",{className:"flex items-center justify-between bg-muted/80 p-3 text-muted-foreground text-xs","data-code-block-header":!0,"data-language":t,children:[(0,q.jsx)("span",{className:"ml-1 font-mono lowercase",children:t}),(0,q.jsx)("div",{className:"flex items-center gap-2",children:o})]}),(0,q.jsx)("div",{className:"w-full",children:(0,q.jsxs)("div",{className:"min-w-full",children:[(0,q.jsx)("div",{className:k("overflow-x-auto dark:hidden",n),dangerouslySetInnerHTML:{__html:i},"data-code-block":!0,"data-language":t,...a}),(0,q.jsx)("div",{className:k("hidden overflow-x-auto dark:block",n),dangerouslySetInnerHTML:{__html:s},"data-code-block":!0,"data-language":t,...a})]})})]})})},Je={"1c":"1c","1c-query":"1cq",abap:"abap","actionscript-3":"as",ada:"ada",adoc:"adoc","angular-html":"html","angular-ts":"ts",apache:"conf",apex:"cls",apl:"apl",applescript:"applescript",ara:"ara",asciidoc:"adoc",asm:"asm",astro:"astro",awk:"awk",ballerina:"bal",bash:"sh",bat:"bat",batch:"bat",be:"be",beancount:"beancount",berry:"berry",bibtex:"bib",bicep:"bicep",blade:"blade.php",bsl:"bsl",c:"c","c#":"cs","c++":"cpp",cadence:"cdc",cairo:"cairo",cdc:"cdc",clarity:"clar",clj:"clj",clojure:"clj","closure-templates":"soy",cmake:"cmake",cmd:"cmd",cobol:"cob",codeowners:"CODEOWNERS",codeql:"ql",coffee:"coffee",coffeescript:"coffee","common-lisp":"lisp",console:"sh",coq:"v",cpp:"cpp",cql:"cql",crystal:"cr",cs:"cs",csharp:"cs",css:"css",csv:"csv",cue:"cue",cypher:"cql",d:"d",dart:"dart",dax:"dax",desktop:"desktop",diff:"diff",docker:"dockerfile",dockerfile:"dockerfile",dotenv:"env","dream-maker":"dm",edge:"edge",elisp:"el",elixir:"ex",elm:"elm","emacs-lisp":"el",erb:"erb",erl:"erl",erlang:"erl",f:"f","f#":"fs",f03:"f03",f08:"f08",f18:"f18",f77:"f77",f90:"f90",f95:"f95",fennel:"fnl",fish:"fish",fluent:"ftl",for:"for","fortran-fixed-form":"f","fortran-free-form":"f90",fs:"fs",fsharp:"fs",fsl:"fsl",ftl:"ftl",gdresource:"tres",gdscript:"gd",gdshader:"gdshader",genie:"gs",gherkin:"feature","git-commit":"gitcommit","git-rebase":"gitrebase",gjs:"js",gleam:"gleam","glimmer-js":"js","glimmer-ts":"ts",glsl:"glsl",gnuplot:"plt",go:"go",gql:"gql",graphql:"graphql",groovy:"groovy",gts:"gts",hack:"hack",haml:"haml",handlebars:"hbs",haskell:"hs",haxe:"hx",hbs:"hbs",hcl:"hcl",hjson:"hjson",hlsl:"hlsl",hs:"hs",html:"html","html-derivative":"html",http:"http",hxml:"hxml",hy:"hy",imba:"imba",ini:"ini",jade:"jade",java:"java",javascript:"js",jinja:"jinja",jison:"jison",jl:"jl",js:"js",json:"json",json5:"json5",jsonc:"jsonc",jsonl:"jsonl",jsonnet:"jsonnet",jssm:"jssm",jsx:"jsx",julia:"jl",kotlin:"kt",kql:"kql",kt:"kt",kts:"kts",kusto:"kql",latex:"tex",lean:"lean",lean4:"lean",less:"less",liquid:"liquid",lisp:"lisp",lit:"lit",llvm:"ll",log:"log",logo:"logo",lua:"lua",luau:"luau",make:"mak",makefile:"mak",markdown:"md",marko:"marko",matlab:"m",md:"md",mdc:"mdc",mdx:"mdx",mediawiki:"wiki",mermaid:"mmd",mips:"s",mipsasm:"s",mmd:"mmd",mojo:"mojo",move:"move",nar:"nar",narrat:"narrat",nextflow:"nf",nf:"nf",nginx:"conf",nim:"nim",nix:"nix",nu:"nu",nushell:"nu",objc:"m","objective-c":"m","objective-cpp":"mm",ocaml:"ml",pascal:"pas",perl:"pl",perl6:"p6",php:"php",plsql:"pls",po:"po",polar:"polar",postcss:"pcss",pot:"pot",potx:"potx",powerquery:"pq",powershell:"ps1",prisma:"prisma",prolog:"pl",properties:"properties",proto:"proto",protobuf:"proto",ps:"ps",ps1:"ps1",pug:"pug",puppet:"pp",purescript:"purs",py:"py",python:"py",ql:"ql",qml:"qml",qmldir:"qmldir",qss:"qss",r:"r",racket:"rkt",raku:"raku",razor:"cshtml",rb:"rb",reg:"reg",regex:"regex",regexp:"regexp",rel:"rel",riscv:"s",rs:"rs",rst:"rst",ruby:"rb",rust:"rs",sas:"sas",sass:"sass",scala:"scala",scheme:"scm",scss:"scss",sdbl:"sdbl",sh:"sh",shader:"shader",shaderlab:"shader",shell:"sh",shellscript:"sh",shellsession:"sh",smalltalk:"st",solidity:"sol",soy:"soy",sparql:"rq",spl:"spl",splunk:"spl",sql:"sql","ssh-config":"config",stata:"do",styl:"styl",stylus:"styl",svelte:"svelte",swift:"swift","system-verilog":"sv",systemd:"service",talon:"talon",talonscript:"talon",tasl:"tasl",tcl:"tcl",templ:"templ",terraform:"tf",tex:"tex",tf:"tf",tfvars:"tfvars",toml:"toml",ts:"ts","ts-tags":"ts",tsp:"tsp",tsv:"tsv",tsx:"tsx",turtle:"ttl",twig:"twig",typ:"typ",typescript:"ts",typespec:"tsp",typst:"typ",v:"v",vala:"vala",vb:"vb",verilog:"v",vhdl:"vhdl",vim:"vim",viml:"vim",vimscript:"vim",vue:"vue","vue-html":"html","vue-vine":"vine",vy:"vy",vyper:"vy",wasm:"wasm",wenyan:"wy",wgsl:"wgsl",wiki:"wiki",wikitext:"wiki",wit:"wit",wl:"wl",wolfram:"wl",xml:"xml",xsl:"xsl",yaml:"yaml",yml:"yml",zenscript:"zs",zig:"zig",zsh:"zsh",\u6587\u8A00:"wy"},Qe=({onDownload:e,onError:t,language:n,children:o,className:r,code:a,...i})=>{let{code:l}=(0,z.useContext)(Re),{isAnimating:s}=(0,z.useContext)(J),c=a!=null?a:l,m=`file.${n&&n in Je?Je[n]:"txt"}`,f="text/plain",h=()=>{try{te(m,c,f),e==null||e()}catch(v){t==null||t(v)}};return(0,q.jsx)("button",{className:k("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",r),disabled:s,onClick:h,title:"Download file",type:"button",...i,children:o!=null?o:(0,q.jsx)(ue.DownloadIcon,{size:14})})},et=({onCopy:e,onError:t,timeout:n=2e3,children:o,className:r,code:a,...i})=>{let[l,s]=(0,z.useState)(!1),c=(0,z.useRef)(0),{code:d}=(0,z.useContext)(Re),{isAnimating:m}=(0,z.useContext)(J),f=a!=null?a:d,h=async()=>{var I;if(typeof window=="undefined"||!((I=navigator==null?void 0:navigator.clipboard)!=null&&I.writeText)){t==null||t(new Error("Clipboard API not available"));return}try{l||(await navigator.clipboard.writeText(f),s(!0),e==null||e(),c.current=window.setTimeout(()=>s(!1),n))}catch(B){t==null||t(B)}};(0,z.useEffect)(()=>()=>{window.clearTimeout(c.current)},[]);let v=l?ue.CheckIcon:ue.CopyIcon;return(0,q.jsx)("button",{className:k("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",r),disabled:m,onClick:h,type:"button",...i,children:o!=null?o:(0,q.jsx)(v,{size:14})})};var tt=require("lucide-react");var ie=require("react/jsx-runtime"),nt=({node:e,className:t,src:n,alt:o,...r})=>{let a=async()=>{var i;if(n)try{let s=await(await fetch(n)).blob(),d=new URL(n,window.location.origin).pathname.split("/").pop()||"",m=d.includes(".")&&((i=d.split(".").pop())==null?void 0:i.length)<=4,f="";if(m)f=d;else{let h=s.type,v="png";h.includes("jpeg")||h.includes("jpg")?v="jpg":h.includes("png")?v="png":h.includes("svg")?v="svg":h.includes("gif")?v="gif":h.includes("webp")&&(v="webp"),f=`${(o||d||"image").replace(/\.[^/.]+$/,"")}.${v}`}te(f,s,s.type)}catch(l){console.error("Failed to download image:",l)}};return n?(0,ie.jsxs)("div",{className:"group relative my-4 inline-block","data-streamdown":"image-wrapper",children:[(0,ie.jsx)("img",{alt:o,className:k("max-w-full rounded-lg",t),"data-streamdown":"image",src:n,...r}),(0,ie.jsx)("div",{className:"pointer-events-none absolute inset-0 hidden rounded-lg bg-black/10 group-hover:block"}),(0,ie.jsx)("button",{className:k("absolute right-2 bottom-2 flex h-8 w-8 cursor-pointer items-center justify-center rounded-md border border-border bg-background/90 shadow-sm backdrop-blur-sm transition-all duration-200 hover:bg-background","opacity-0 group-hover:opacity-100"),onClick:a,title:"Download image",type:"button",children:(0,ie.jsx)(tt.DownloadIcon,{size:14})})]}):null};var R=function(){return R=Object.assign||function(t){for(var n,o=1,r=arguments.length;o<r;o++){n=arguments[o];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},R.apply(this,arguments)};typeof window!="undefined"&&(window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),typeof window.CustomEvent!="function"&&(window.CustomEvent=function(t,n){n=n||{bubbles:!1,cancelable:!1,detail:null};var o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n.bubbles,n.cancelable,n.detail),o}));var fn=typeof document!="undefined"&&!!document.documentMode,Ee;function hn(){return Ee||(Ee=document.createElement("div").style)}var ot=["webkit","moz","ms"],xe={};function We(e){if(xe[e])return xe[e];var t=hn();if(e in t)return xe[e]=e;for(var n=e[0].toUpperCase()+e.slice(1),o=ot.length;o--;){var r="".concat(ot[o]).concat(n);if(r in t)return xe[e]=r}}function Ce(e,t){return parseFloat(t[We(e)])||0}function Ne(e,t,n){n===void 0&&(n=window.getComputedStyle(e));var o=t==="border"?"Width":"";return{left:Ce("".concat(t,"Left").concat(o),n),right:Ce("".concat(t,"Right").concat(o),n),top:Ce("".concat(t,"Top").concat(o),n),bottom:Ce("".concat(t,"Bottom").concat(o),n)}}function me(e,t,n){e.style[We(t)]=n}function gn(e,t){var n=We("transform");me(e,"transition","".concat(n," ").concat(t.duration,"ms ").concat(t.easing))}function bn(e,t,n){var o=t.x,r=t.y,a=t.scale,i=t.isSVG;if(me(e,"transform","scale(".concat(a,") translate(").concat(o,"px, ").concat(r,"px)")),i&&fn){var l=window.getComputedStyle(e).getPropertyValue("transform");e.setAttribute("transform",l)}}function ze(e){var t=e.parentNode,n=window.getComputedStyle(e),o=window.getComputedStyle(t),r=e.getBoundingClientRect(),a=t.getBoundingClientRect();return{elem:{style:n,width:r.width,height:r.height,top:r.top,bottom:r.bottom,left:r.left,right:r.right,margin:Ne(e,"margin",n),border:Ne(e,"border",n)},parent:{style:o,width:a.width,height:a.height,top:a.top,bottom:a.bottom,left:a.left,right:a.right,padding:Ne(t,"padding",o),border:Ne(t,"border",o)}}}var we={down:"mousedown",move:"mousemove",up:"mouseup mouseleave"};typeof window!="undefined"&&(typeof window.PointerEvent=="function"?we={down:"pointerdown",move:"pointermove",up:"pointerup pointerleave pointercancel"}:typeof window.TouchEvent=="function"&&(we={down:"touchstart",move:"touchmove",up:"touchend touchcancel"}));function De(e,t,n,o){we[e].split(" ").forEach(function(r){t.addEventListener(r,n,o)})}function Oe(e,t,n){we[e].split(" ").forEach(function(o){t.removeEventListener(o,n)})}function at(e,t){for(var n=e.length;n--;)if(e[n].pointerId===t.pointerId)return n;return-1}function qe(e,t){var n;if(t.touches){n=0;for(var o=0,r=t.touches;o<r.length;o++){var a=r[o];a.pointerId=n++,qe(e,a)}return}n=at(e,t),n>-1&&e.splice(n,1),e.push(t)}function wn(e,t){if(t.touches){for(;e.length;)e.pop();return}var n=at(e,t);n>-1&&e.splice(n,1)}function rt(e){e=e.slice(0);for(var t=e.pop(),n;n=e.pop();)t={clientX:(n.clientX-t.clientX)/2+t.clientX,clientY:(n.clientY-t.clientY)/2+t.clientY};return t}function je(e){if(e.length<2)return 0;var t=e[0],n=e[1];return Math.sqrt(Math.pow(Math.abs(n.clientX-t.clientX),2)+Math.pow(Math.abs(n.clientY-t.clientY),2))}function yn(e){for(var t=e;t&&t.parentNode;){if(t.parentNode===document)return!0;t=t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentNode}return!1}function vn(e){return(e.getAttribute("class")||"").trim()}function kn(e,t){return e.nodeType===1&&" ".concat(vn(e)," ").indexOf(" ".concat(t," "))>-1}function Mn(e,t){for(var n=e;n!=null;n=n.parentNode)if(kn(n,t.excludeClass)||t.exclude.indexOf(n)>-1)return!0;return!1}var xn=/^http:[\w\.\/]+svg$/;function Cn(e){return xn.test(e.namespaceURI)&&e.nodeName.toLowerCase()!=="svg"}function Nn(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var st={animate:!1,canvas:!1,cursor:"move",disablePan:!1,disableZoom:!1,disableXAxis:!1,disableYAxis:!1,duration:200,easing:"ease-in-out",exclude:[],excludeClass:"panzoom-exclude",handleStartEvent:function(e){e.preventDefault(),e.stopPropagation()},maxScale:4,minScale:.125,overflow:"hidden",panOnlyWhenZoomed:!1,pinchAndPan:!1,relative:!1,setTransform:bn,startX:0,startY:0,startScale:1,step:.3,touchAction:"none"};function Xe(e,t){if(!e)throw new Error("Panzoom requires an element as an argument");if(e.nodeType!==1)throw new Error("Panzoom requires an element with a nodeType of 1");if(!yn(e))throw new Error("Panzoom should be called on elements that have been attached to the DOM");t=R(R({},st),t);var n=Cn(e),o=e.parentNode;o.style.overflow=t.overflow,o.style.userSelect="none",o.style.touchAction=t.touchAction,(t.canvas?o:e).style.cursor=t.cursor,e.style.userSelect="none",e.style.touchAction=t.touchAction,me(e,"transformOrigin",typeof t.origin=="string"?t.origin:n?"0 0":"50% 50%");function r(){o.style.overflow="",o.style.userSelect="",o.style.touchAction="",o.style.cursor="",e.style.cursor="",e.style.userSelect="",e.style.touchAction="",me(e,"transformOrigin","")}function a(u){u===void 0&&(u={});for(var w in u)u.hasOwnProperty(w)&&(t[w]=u[w]);(u.hasOwnProperty("cursor")||u.hasOwnProperty("canvas"))&&(o.style.cursor=e.style.cursor="",(t.canvas?o:e).style.cursor=t.cursor),u.hasOwnProperty("overflow")&&(o.style.overflow=u.overflow),u.hasOwnProperty("touchAction")&&(o.style.touchAction=u.touchAction,e.style.touchAction=u.touchAction)}var i=0,l=0,s=1,c=!1;I(t.startScale,{animate:!1,force:!0}),setTimeout(function(){v(t.startX,t.startY,{animate:!1,force:!0})});function d(u,w,C){if(!C.silent){var T=new CustomEvent(u,{detail:w});e.dispatchEvent(T)}}function m(u,w,C){var T={x:i,y:l,scale:s,isSVG:n,originalEvent:C};return requestAnimationFrame(function(){typeof w.animate=="boolean"&&(w.animate?gn(e,w):me(e,"transition","none")),w.setTransform(e,T,w),d(u,T,w),d("panzoomchange",T,w)}),T}function f(u,w,C,T){var p=R(R({},t),T),P={x:i,y:l,opts:p};if(!p.force&&(p.disablePan||p.panOnlyWhenZoomed&&s===p.startScale))return P;if(u=parseFloat(u),w=parseFloat(w),p.disableXAxis||(P.x=(p.relative?i:0)+u),p.disableYAxis||(P.y=(p.relative?l:0)+w),p.contain){var M=ze(e),_=M.elem.width/s,Z=M.elem.height/s,he=_*C,ge=Z*C,ae=(he-_)/2,se=(ge-Z)/2;if(p.contain==="inside"){var Ie=(-M.elem.margin.left-M.parent.padding.left+ae)/C,Be=(M.parent.width-he-M.parent.padding.left-M.elem.margin.left-M.parent.border.left-M.parent.border.right+ae)/C;P.x=Math.max(Math.min(P.x,Be),Ie);var Le=(-M.elem.margin.top-M.parent.padding.top+se)/C,Ae=(M.parent.height-ge-M.parent.padding.top-M.elem.margin.top-M.parent.border.top-M.parent.border.bottom+se)/C;P.y=Math.max(Math.min(P.y,Ae),Le)}else if(p.contain==="outside"){var Ie=(-(he-M.parent.width)-M.parent.padding.left-M.parent.border.left-M.parent.border.right+ae)/C,Be=(ae-M.parent.padding.left)/C;P.x=Math.max(Math.min(P.x,Be),Ie);var Le=(-(ge-M.parent.height)-M.parent.padding.top-M.parent.border.top-M.parent.border.bottom+se)/C,Ae=(se-M.parent.padding.top)/C;P.y=Math.max(Math.min(P.y,Ae),Le)}}return p.roundPixels&&(P.x=Math.round(P.x),P.y=Math.round(P.y)),P}function h(u,w){var C=R(R({},t),w),T={scale:s,opts:C};if(!C.force&&C.disableZoom)return T;var p=t.minScale,P=t.maxScale;if(C.contain){var M=ze(e),_=M.elem.width/s,Z=M.elem.height/s;if(_>1&&Z>1){var he=M.parent.width-M.parent.border.left-M.parent.border.right,ge=M.parent.height-M.parent.border.top-M.parent.border.bottom,ae=he/_,se=ge/Z;t.contain==="inside"?P=Math.min(P,ae,se):t.contain==="outside"&&(p=Math.max(p,ae,se))}}return T.scale=Math.min(Math.max(u,p),P),T}function v(u,w,C,T){var p=f(u,w,s,C);return i!==p.x||l!==p.y?(i=p.x,l=p.y,m("panzoompan",p.opts,T)):{x:i,y:l,scale:s,isSVG:n,originalEvent:T}}function I(u,w,C){var T=h(u,w),p=T.opts;if(!(!p.force&&p.disableZoom)){u=T.scale;var P=i,M=l;if(p.focal){var _=p.focal;P=(_.x/u-_.x/s+i*u)/u,M=(_.y/u-_.y/s+l*u)/u}var Z=f(P,M,u,{relative:!1,force:!0});return i=Z.x,l=Z.y,s=u,m("panzoomzoom",p,C)}}function B(u,w){var C=R(R(R({},t),{animate:!0}),w);return I(s*Math.exp((u?1:-1)*C.step),C)}function N(u){return B(!0,u)}function H(u){return B(!1,u)}function S(u,w,C,T){var p=ze(e),P={width:p.parent.width-p.parent.padding.left-p.parent.padding.right-p.parent.border.left-p.parent.border.right,height:p.parent.height-p.parent.padding.top-p.parent.padding.bottom-p.parent.border.top-p.parent.border.bottom},M=w.clientX-p.parent.left-p.parent.padding.left-p.parent.border.left-p.elem.margin.left,_=w.clientY-p.parent.top-p.parent.padding.top-p.parent.border.top-p.elem.margin.top;n||(M-=p.elem.width/s/2,_-=p.elem.height/s/2);var Z={x:M/P.width*(P.width*u),y:_/P.height*(P.height*u)};return I(u,R(R({},C),{animate:!1,focal:Z}),T)}function O(u,w){u.preventDefault();var C=R(R(R({},t),w),{animate:!1}),T=u.deltaY===0&&u.deltaX?u.deltaX:u.deltaY,p=T<0?1:-1,P=h(s*Math.exp(p*C.step/3),C).scale;return S(P,u,C,u)}function le(u){var w=R(R(R({},t),{animate:!0,force:!0}),u);s=h(w.startScale,w).scale;var C=f(w.startX,w.startY,s,w);return i=C.x,l=C.y,m("panzoomreset",w)}var ce,fe,b,X,j,G,L=[];function F(u){if(!Mn(u.target,t)){qe(L,u),c=!0,t.handleStartEvent(u),ce=i,fe=l,d("panzoomstart",{x:i,y:l,scale:s,isSVG:n,originalEvent:u},t);var w=rt(L);b=w.clientX,X=w.clientY,j=s,G=je(L)}}function ee(u){if(!(!c||ce===void 0||fe===void 0||b===void 0||X===void 0)){qe(L,u);var w=rt(L),C=L.length>1,T=s;if(C){G===0&&(G=je(L));var p=je(L)-G;T=h(p*t.step/80+j).scale,S(T,w,{animate:!1},u)}(!C||t.pinchAndPan)&&v(ce+(w.clientX-b)/T,fe+(w.clientY-X)/T,{animate:!1},u)}}function ne(u){L.length===1&&d("panzoomend",{x:i,y:l,scale:s,isSVG:n,originalEvent:u},t),wn(L,u),c&&(c=!1,ce=fe=b=X=void 0)}var K=!1;function V(){K||(K=!0,De("down",t.canvas?o:e,F),De("move",document,ee,{passive:!0}),De("up",document,ne,{passive:!0}))}function W(){K=!1,Oe("down",t.canvas?o:e,F),Oe("move",document,ee),Oe("up",document,ne)}return t.noBind||V(),{bind:V,destroy:W,eventNames:we,getPan:function(){return{x:i,y:l}},getScale:function(){return s},getOptions:function(){return Nn(t)},handleDown:F,handleMove:ee,handleUp:ne,pan:v,reset:le,resetStyle:r,setOptions:a,setStyle:function(u,w){return me(e,u,w)},zoom:I,zoomIn:N,zoomOut:H,zoomToPoint:S,zoomWithWheel:O}}Xe.defaultOptions=st;var E=require("react");var oe=require("react/jsx-runtime"),Pn=async e=>{let n={...{startOnLoad:!1,theme:"default",securityLevel:"strict",fontFamily:"monospace",suppressErrorRendering:!0},...e},r=(await import("mermaid")).default;return r.initialize(n),r},it=0,lt="28rem",Tn=()=>(it+=1,`streamdown-mermaid-${Date.now().toString(36)}-${it.toString(36)}`),ye=(0,E.forwardRef)(({chart:e,className:t,config:n,onPanzoomReady:o,enablePanZoom:r=!1,renderId:a},i)=>{let l=(0,E.useRef)(null),s=(0,E.useRef)(null),c=(0,E.useRef)(null),d=(0,E.useRef)(void 0),m=(0,E.useRef)(""),[f,h]=(0,E.useState)(null),[v,I]=(0,E.useState)(!0),[B,N]=(0,E.useState)(!1);(0,E.useEffect)(()=>{d.current=o},[o]),(0,E.useImperativeHandle)(i,()=>({reset:()=>{var b;(b=s.current)==null||b.reset()},zoomIn:()=>{var b;(b=s.current)==null||b.zoomIn()},zoomOut:()=>{var b;(b=s.current)==null||b.zoomOut()}}),[]);let H=()=>{var b;c.current&&l.current&&l.current.removeEventListener("wheel",c.current),c.current=null,s.current&&(s.current.destroy(),s.current=null),(b=d.current)==null||b.call(d,!1)},S=b=>{b.removeAttribute("width"),b.removeAttribute("height"),b.setAttribute("preserveAspectRatio","xMidYMid meet"),b.style.display="block",b.style.margin="0 auto",r?(b.style.width="auto",b.style.height="100%",b.style.maxWidth="100%",b.style.maxHeight="100%"):(b.style.width="100%",b.style.height="auto",b.style.maxWidth="100%",b.style.maxHeight=lt)},O=b=>{var L;let X=(L=b.viewBox)==null?void 0:L.baseVal;if(X&&X.width>0&&X.height>0)return{width:X.width,height:X.height};let j=b.getBBox();if(j.width>0&&j.height>0)return{width:j.width,height:j.height};let G=b.getBoundingClientRect();return{width:G.width||1,height:G.height||1}},le=b=>{var G;H(),S(b);let X=Xe(b,{animate:!0,contain:r?null:"inside",duration:200,easing:"ease-in-out",maxScale:r?10:5,minScale:.5,step:.1,startScale:1});if(s.current=X,l.current){let L=F=>{s.current&&(F.preventDefault(),s.current.zoomWithWheel(F))};l.current.addEventListener("wheel",L,{passive:!1}),c.current=L}b.style.cursor="grab";let j=l.current;j&&requestAnimationFrame(()=>{if(!s.current)return;let{width:L,height:F}=O(b);if(L===0||F===0)return;let ee=j.getBoundingClientRect(),ne=ee.width/L,K=ee.height/F,V=Math.min(ne,K,1),W=Number.isFinite(V)&&V>0?V:1,u=r?W*1:W;s.current.setOptions({minScale:W*.5,maxScale:W*8}),s.current.reset({animate:!1}),s.current.zoom(W,{animate:!1})}),(G=d.current)==null||G.call(d,!0)};(0,E.useEffect)(()=>{let b=!1;return(async()=>{var F,ee,ne;let j=l.current;if(!j)return;I(!0),h(null),(F=d.current)==null||F.call(d,!1);let G=j.innerHTML,L=a!=null?a:Tn();try{let K=await Pn(n);if(b)return;H();let{svg:V}=await K.render(L,e);if(b||!l.current)return;l.current.innerHTML=V;let W=l.current.querySelector("svg");if(W instanceof SVGElement&&(W.id=L,r?le(W):(S(W),(ee=d.current)==null||ee.call(d,!0))),b)return;m.current=j.innerHTML,N(!0)}catch(K){if(b)return;let V=m.current;if(V&&l.current){l.current.innerHTML=V;let u=l.current.querySelector("svg");u instanceof SVGElement&&(u.id=L,r?le(u):(S(u),(ne=d.current)==null||ne.call(d,!0))),N(!0)}else j.innerHTML=G,N(!1);let W=K instanceof Error?K.message:"Failed to render Mermaid chart";V||h(W)}finally{b||I(!1)}})(),()=>{b=!0,H()}},[e,n]);let ce=(0,E.useMemo)(()=>r?{height:"100%",maxHeight:"100%"}:{maxHeight:lt},[r]);return!(B||!!m.current)&&f?(0,oe.jsxs)("div",{className:k("my-4 rounded-lg border border-red-200 bg-red-50 p-4",t),children:[(0,oe.jsxs)("p",{className:"font-mono text-red-700 text-sm",children:["Mermaid Error: ",f]}),(0,oe.jsxs)("details",{className:"mt-2",children:[(0,oe.jsx)("summary",{className:"cursor-pointer text-red-600 text-xs",children:"Show Code"}),(0,oe.jsx)("pre",{className:"mt-2 overflow-x-auto rounded bg-red-100 p-2 text-red-800 text-xs",children:e})]})]}):(0,oe.jsx)("div",{"aria-label":"Mermaid chart",className:k("flex w-full items-center justify-center",r?"my-0 h-full overflow-hidden":"my-4 max-h-[28rem] overflow-auto",t),ref:l,style:ce,role:"img"})});ye.displayName="Mermaid";var D=require("lucide-react"),A=require("react");var g=require("react/jsx-runtime"),ct=(e,t)=>{if(typeof document!="undefined"&&t){let o=document.getElementById(t);if(o instanceof SVGElement)return o}let n=e==null?void 0:e.closest('[data-streamdown="mermaid-block"]');return n==null?void 0:n.querySelector("svg")},dt=({className:e,chart:t,onCopy:n,onDownload:o,onError:r,timeout:a=2e3,type:i,renderId:l})=>{let{isAnimating:s}=(0,A.useContext)(J),c=(0,A.useRef)(null),[d,m]=(0,A.useState)(!1),f=(0,A.useRef)(0);(0,A.useEffect)(()=>{let S=O=>{c.current&&!c.current.contains(O.target)&&m(!1)};return document.addEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}},[]),(0,A.useEffect)(()=>()=>{window.clearTimeout(f.current)},[]);let h=async()=>{var S;if(typeof window=="undefined"||!((S=navigator==null?void 0:navigator.clipboard)!=null&&S.write)){r==null||r(new Error("Clipboard API not available"));return}try{let O=ct(c.current,l);if(!O)throw new Error("Mermaid diagram not found");let le=await $e(O,1);await navigator.clipboard.write([new ClipboardItem({"image/png":le})]),n==null||n(),m(!1)}catch(O){r==null||r(O)}},v=async()=>{var S;if(typeof window=="undefined"||!((S=navigator==null?void 0:navigator.clipboard)!=null&&S.writeText)){r==null||r(new Error("Clipboard API not available"));return}try{await navigator.clipboard.writeText(t),n==null||n(),m(!1)}catch(O){r==null||r(O)}},I=async()=>{try{let S=ct(c.current,l);if(console.log("svgElement",S),!S)throw new Error("Mermaid diagram not found");let O=await $e(S,1);console.log("blob",O),te(`mermaid-diagram-${Date.now()}.png`,O,"image/png"),o==null||o(),m(!1)}catch(S){r==null||r(S)}},B=()=>{try{te(`mermaid-diagram-${Date.now()}.mmd`,t,"text/plain"),o==null||o(),m(!1)}catch(S){r==null||r(S)}},N=i==="download"?D.DownloadIcon:D.CopyIcon,H=i==="download"?"Download diagram":"Copy diagram";return(0,g.jsxs)("div",{className:"relative",ref:c,children:[(0,g.jsx)("button",{className:k("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50 w-fit",e),disabled:s,onClick:()=>m(S=>!S),title:H,type:"button",children:(0,g.jsx)(N,{size:14})}),d&&(0,g.jsx)("div",{className:"absolute top-full right-0 z-10 mt-1 w-max rounded-md border border-border bg-background shadow-lg",style:{width:"max-content"},children:i==="copy"?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("button",{className:"flex w-max items-center gap-2 px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:h,type:"button",style:{width:"max-content"},children:[(0,g.jsx)(D.CopyIcon,{className:"h-4 w-4"}),(0,g.jsx)("span",{children:"Copy as PNG"})]}),(0,g.jsxs)("button",{className:"flex w-max items-center gap-2 px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:v,type:"button",style:{width:"max-content"},children:[(0,g.jsx)(D.CopyIcon,{className:"h-4 w-4"}),(0,g.jsx)("span",{children:"Copy as MMD"})]})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("button",{className:"flex w-max items-center gap-2 px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:I,type:"button",style:{width:"max-content"},children:[(0,g.jsx)(D.DownloadIcon,{className:"h-4 w-4"}),(0,g.jsx)("span",{children:"Download as PNG"})]}),(0,g.jsxs)("button",{className:"flex w-max items-center gap-2 px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:B,type:"button",style:{width:"max-content"},children:[(0,g.jsx)(D.DownloadIcon,{className:"h-4 w-4"}),(0,g.jsx)("span",{children:"Download as MMD"})]})]})})]})},ut=({className:e,chart:t,onCopy:n,onError:o,timeout:r=2e3,renderId:a})=>(0,g.jsx)(dt,{chart:t,className:e,onCopy:n,onError:o,timeout:r,renderId:a,type:"copy"}),mt=({className:e,chart:t,onDownload:n,onError:o,renderId:r})=>(0,g.jsx)(dt,{chart:t,className:e,onDownload:n,onError:o,renderId:r,type:"download"}),pt=({chart:e,config:t,children:n,className:o,...r})=>{let[a,i]=(0,A.useState)(!1),{isAnimating:l}=(0,A.useContext)(J),s=(0,A.useRef)(null),c=(0,A.useRef)(null),[d,m]=(0,A.useState)(!1),f=(0,A.useCallback)(()=>{i(N=>!N)},[]),h=(0,A.useCallback)(N=>{c.current=N},[]),v=(0,A.useCallback)(()=>{var N;(N=c.current)==null||N.zoomIn()},[]),I=(0,A.useCallback)(()=>{var N;(N=c.current)==null||N.zoomOut()},[]),B=(0,A.useCallback)(()=>{var N;(N=c.current)==null||N.reset()},[]);return(0,A.useEffect)(()=>{let N=H=>{H.key==="Escape"&&a&&i(!1)};if(a){document.addEventListener("keydown",N),document.body.style.overflow="hidden";let H=document.createElement("style");H.id="streamdown-fullscreen-scrollbar-hide",H.textContent=`
        .streamdown-fullscreen-scroll::-webkit-scrollbar {
          display: none;
        }
      `,document.head.appendChild(H)}return()=>{document.removeEventListener("keydown",N),document.body.style.overflow="";let H=document.getElementById("streamdown-fullscreen-scrollbar-hide");H&&H.remove()}},[a]),(0,A.useEffect)(()=>{a||(c.current=null,m(!1))},[a]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("button",{className:k("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",o),disabled:l,onClick:f,title:"View fullscreen",type:"button",...r,children:n!=null?n:(0,g.jsx)(D.Maximize,{size:14})}),a&&(0,g.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-background/95 backdrop-blur-sm p-4 sm:p-6 md:p-8",onClick:f,children:(0,g.jsxs)("div",{className:"relative flex h-full w-full max-h-[calc(100vh-2rem)] max-w-[calc(100vw-2rem)] flex-col overflow-hidden rounded-xl border bg-background shadow-2xl sm:max-h-[calc(100vh-3rem)] sm:max-w-[calc(100vw-3rem)] md:max-h-[calc(100vh-4rem)] md:max-w-[calc(100vw-4rem)]",onClick:N=>N.stopPropagation(),children:[(0,g.jsx)("button",{className:"absolute top-4 right-4 z-10 cursor-pointer rounded-md p-2 text-muted-foreground transition-all hover:bg-muted hover:text-foreground",onClick:f,title:"Close fullscreen (ESC)",type:"button",children:(0,g.jsx)(D.X,{size:20})}),a&&(0,g.jsx)("div",{className:"absolute left-1/2 top-4 z-10 -translate-x-1/2 transform rounded-md border bg-background/95 shadow-lg",children:(0,g.jsxs)("div",{className:"flex items-center divide-x divide-border/70",children:[(0,g.jsxs)("button",{className:"flex items-center gap-2 px-3 py-2 text-muted-foreground transition hover:bg-muted hover:text-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-60",disabled:!d,onClick:I,title:"Zoom out",type:"button",children:[(0,g.jsx)(D.ZoomOut,{className:"h-4 w-4"}),(0,g.jsx)("span",{className:"hidden sm:inline",children:"Out"})]}),(0,g.jsxs)("button",{className:"flex items-center gap-2 px-3 py-2 text-muted-foreground transition hover:bg-muted hover:text-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-60",disabled:!d,onClick:B,title:"Reset view",type:"button",children:[(0,g.jsx)(D.RefreshCw,{className:"h-4 w-4"}),(0,g.jsx)("span",{className:"hidden sm:inline",children:"Reset"})]}),(0,g.jsxs)("button",{className:"flex items-center gap-2 px-3 py-2 text-muted-foreground transition hover:bg-muted hover:text-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-60",disabled:!d,onClick:v,title:"Zoom in",type:"button",children:[(0,g.jsx)(D.ZoomIn,{className:"h-4 w-4"}),(0,g.jsx)("span",{className:"hidden sm:inline",children:"In"})]})]})}),(0,g.jsx)("div",{ref:s,className:"streamdown-fullscreen-scroll flex h-full items-center justify-center overflow-hidden p-4 sm:p-6 md:p-8",style:{scrollbarWidth:"none",msOverflowStyle:"none",WebkitOverflowScrolling:"touch"},children:(0,g.jsx)("div",{className:"h-full w-full",children:(0,g.jsx)(ye,{chart:e,className:"my-0 h-full",config:t,enablePanZoom:!0,onPanzoomReady:m,ref:h})})})]})})]})};var pe=require("lucide-react"),Y=require("react");var Q=require("react/jsx-runtime");function ft(e){var a,i;let t=[],n=[],o=e.querySelectorAll("thead th");for(let l of o)t.push(((a=l.textContent)==null?void 0:a.trim())||"");let r=e.querySelectorAll("tbody tr");for(let l of r){let s=[],c=l.querySelectorAll("td");for(let d of c)s.push(((i=d.textContent)==null?void 0:i.trim())||"");n.push(s)}return{headers:t,rows:n}}function ht(e){let{headers:t,rows:n}=e,o=a=>a.includes(",")||a.includes('"')||a.includes(`
`)?`"${a.replace(/"/g,'""')}"`:a,r=[];t.length>0&&r.push(t.map(o).join(","));for(let a of n)r.push(a.map(o).join(","));return r.join(`
`)}function gt(e){let{headers:t,rows:n}=e;if(t.length===0)return"";let o=[],r=t.map(a=>a.replace(/\|/g,"\\|"));o.push(`| ${r.join(" | ")} |`),o.push(`| ${t.map(()=>"---").join(" | ")} |`);for(let a of n){let i=[...a];for(;i.length<t.length;)i.push("");let l=i.map(s=>s.replace(/\|/g,"\\|"));o.push(`| ${l.join(" | ")} |`)}return o.join(`
`)}var bt=({children:e,className:t,onCopy:n,onError:o,timeout:r=2e3,format:a="markdown"})=>{let[i,l]=(0,Y.useState)(!1),s=(0,Y.useRef)(0),{isAnimating:c}=(0,Y.useContext)(J),d=async f=>{var h;if(typeof window=="undefined"||!((h=navigator==null?void 0:navigator.clipboard)!=null&&h.write)){o==null||o(new Error("Clipboard API not available"));return}try{if(!i){let I=f.currentTarget.closest('[data-streamdown="table-wrapper"]'),B=I==null?void 0:I.querySelector("table");if(!B){o==null||o(new Error("Table not found"));return}let N=ft(B),H=new ClipboardItem({"text/plain":a==="markdown"?gt(N):ht(N),"text/html":new Blob([B.outerHTML],{type:"text/html"})});await navigator.clipboard.write([H]),l(!0),n==null||n(),s.current=window.setTimeout(()=>l(!1),r)}}catch(v){o==null||o(v)}};(0,Y.useEffect)(()=>()=>{window.clearTimeout(s.current)},[]);let m=i?pe.CheckIcon:pe.CopyIcon;return(0,Q.jsx)("button",{className:k("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",t),disabled:c,onClick:d,title:`Copy table as ${a}`,type:"button",children:e!=null?e:(0,Q.jsx)(m,{size:14})})};var wt=({children:e,className:t,onDownload:n,onError:o})=>{let[r,a]=(0,Y.useState)(!1),i=(0,Y.useRef)(null),{isAnimating:l}=(0,Y.useContext)(J),s=c=>{var d;try{let m=(d=i.current)==null?void 0:d.closest('[data-streamdown="table-wrapper"]'),f=m==null?void 0:m.querySelector("table");if(!f){o==null||o(new Error("Table not found"));return}let h=ft(f),v=c==="csv"?ht(h):gt(h);te(`table.${c==="csv"?"csv":"md"}`,v,c==="csv"?"text/csv":"text/markdown"),a(!1),n==null||n(c)}catch(m){o==null||o(m)}};return(0,Y.useEffect)(()=>{let c=d=>{i.current&&!i.current.contains(d.target)&&a(!1)};return document.addEventListener("mousedown",c),()=>{document.removeEventListener("mousedown",c)}},[]),(0,Q.jsxs)("div",{className:"relative",ref:i,children:[(0,Q.jsx)("button",{className:k("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",t),disabled:l,onClick:()=>a(!r),title:"Download table",type:"button",children:e!=null?e:(0,Q.jsx)(pe.DownloadIcon,{size:14})}),r&&(0,Q.jsxs)("div",{className:"absolute top-full right-0 z-10 mt-1 min-w-[120px] rounded-md border border-border bg-background shadow-lg",children:[(0,Q.jsx)("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>s("csv"),type:"button",children:"CSV"}),(0,Q.jsx)("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>s("markdown"),type:"button",children:"Markdown"})]})]})};var y=require("react/jsx-runtime"),Sn=/language-([^\s]+)/;function Pe(e,t){if(!(e!=null&&e.position||t!=null&&t.position))return!0;if(!(e!=null&&e.position&&(t!=null&&t.position)))return!1;let n=e.position.start,o=t.position.start,r=e.position.end,a=t.position.end;return(n==null?void 0:n.line)===(o==null?void 0:o.line)&&(n==null?void 0:n.column)===(o==null?void 0:o.column)&&(r==null?void 0:r.line)===(a==null?void 0:a.line)&&(r==null?void 0:r.column)===(a==null?void 0:a.column)}function $(e,t){return e.className===t.className&&Pe(e.node,t.node)}var _e=(e,t)=>typeof e=="boolean"?e:e[t]!==!1,Ge=(0,x.memo)(({children:e,className:t,node:n,...o})=>(0,y.jsx)("ol",{className:k("ml-4 list-outside list-decimal whitespace-normal",t),"data-streamdown":"ordered-list",...o,children:e}),(e,t)=>$(e,t));Ge.displayName="MarkdownOl";var yt=(0,x.memo)(({children:e,className:t,node:n,...o})=>(0,y.jsx)("li",{className:k("py-1",t),"data-streamdown":"list-item",...o,children:e}),(e,t)=>e.className===t.className&&Pe(e.node,t.node));yt.displayName="MarkdownLi";var vt=(0,x.memo)(({children:e,className:t,node:n,...o})=>(0,y.jsx)("ul",{className:k("ml-4 list-outside list-disc whitespace-normal",t),"data-streamdown":"unordered-list",...o,children:e}),(e,t)=>$(e,t));vt.displayName="MarkdownUl";var kt=(0,x.memo)(({className:e,node:t,...n})=>(0,y.jsx)("hr",{className:k("my-6 border-border",e),"data-streamdown":"horizontal-rule",...n}),(e,t)=>$(e,t));kt.displayName="MarkdownHr";var Mt=(0,x.memo)(({children:e,className:t,node:n,...o})=>(0,y.jsx)("span",{className:k("font-semibold",t),"data-streamdown":"strong",...o,children:e}),(e,t)=>$(e,t));Mt.displayName="MarkdownStrong";var xt=(0,x.memo)(({children:e,className:t,href:n,node:o,...r})=>{let a=n==="streamdown:incomplete-link";return(0,y.jsx)("a",{className:k("wrap-anywhere font-medium text-primary underline",t),"data-incomplete":a,"data-streamdown":"link",href:n,rel:"noreferrer",target:"_blank",...r,children:e})},(e,t)=>$(e,t)&&e.href===t.href);xt.displayName="MarkdownA";var Ct=(0,x.memo)(({children:e,className:t,node:n,...o})=>(0,y.jsx)("h1",{className:k("mt-6 mb-2 font-semibold text-3xl",t),"data-streamdown":"heading-1",...o,children:e}),(e,t)=>$(e,t));Ct.displayName="MarkdownH1";var Nt=(0,x.memo)(({children:e,className:t,node:n,...o})=>(0,y.jsx)("h2",{className:k("mt-6 mb-2 font-semibold text-2xl",t),"data-streamdown":"heading-2",...o,children:e}),(e,t)=>$(e,t));Nt.displayName="MarkdownH2";var Pt=(0,x.memo)(({children:e,className:t,node:n,...o})=>(0,y.jsx)("h3",{className:k("mt-6 mb-2 font-semibold text-xl",t),"data-streamdown":"heading-3",...o,children:e}),(e,t)=>$(e,t));Pt.displayName="MarkdownH3";var Tt=(0,x.memo)(({children:e,className:t,node:n,...o})=>(0,y.jsx)("h4",{className:k("mt-6 mb-2 font-semibold text-lg",t),"data-streamdown":"heading-4",...o,children:e}),(e,t)=>$(e,t));Tt.displayName="MarkdownH4";var St=(0,x.memo)(({children:e,className:t,node:n,...o})=>(0,y.jsx)("h5",{className:k("mt-6 mb-2 font-semibold text-base",t),"data-streamdown":"heading-5",...o,children:e}),(e,t)=>$(e,t));St.displayName="MarkdownH5";var It=(0,x.memo)(({children:e,className:t,node:n,...o})=>(0,y.jsx)("h6",{className:k("mt-6 mb-2 font-semibold text-sm",t),"data-streamdown":"heading-6",...o,children:e}),(e,t)=>$(e,t));It.displayName="MarkdownH6";var Bt=(0,x.memo)(({children:e,className:t,node:n,...o})=>{let r=(0,x.useContext)(ve),a=_e(r,"table");return(0,y.jsxs)("div",{className:"my-4 flex flex-col space-y-2","data-streamdown":"table-wrapper",children:[a&&(0,y.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,y.jsx)(bt,{}),(0,y.jsx)(wt,{})]}),(0,y.jsx)("div",{className:"overflow-x-auto",children:(0,y.jsx)("table",{className:k("w-full border-collapse border border-border",t),"data-streamdown":"table",...o,children:e})})]})},(e,t)=>$(e,t));Bt.displayName="MarkdownTable";var Lt=(0,x.memo)(({children:e,className:t,node:n,...o})=>(0,y.jsx)("thead",{className:k("bg-muted/80",t),"data-streamdown":"table-header",...o,children:e}),(e,t)=>$(e,t));Lt.displayName="MarkdownThead";var At=(0,x.memo)(({children:e,className:t,node:n,...o})=>(0,y.jsx)("tbody",{className:k("divide-y divide-border bg-muted/40",t),"data-streamdown":"table-body",...o,children:e}),(e,t)=>$(e,t));At.displayName="MarkdownTbody";var $t=(0,x.memo)(({children:e,className:t,node:n,...o})=>(0,y.jsx)("tr",{className:k("border-border border-b",t),"data-streamdown":"table-row",...o,children:e}),(e,t)=>$(e,t));$t.displayName="MarkdownTr";var Ht=(0,x.memo)(({children:e,className:t,node:n,...o})=>(0,y.jsx)("th",{className:k("whitespace-nowrap px-4 py-2 text-left font-semibold text-sm",t),"data-streamdown":"table-header-cell",...o,children:e}),(e,t)=>$(e,t));Ht.displayName="MarkdownTh";var Rt=(0,x.memo)(({children:e,className:t,node:n,...o})=>(0,y.jsx)("td",{className:k("px-4 py-2 text-sm",t),"data-streamdown":"table-cell",...o,children:e}),(e,t)=>$(e,t));Rt.displayName="MarkdownTd";var Et=(0,x.memo)(({children:e,className:t,node:n,...o})=>(0,y.jsx)("blockquote",{className:k("my-4 border-muted-foreground/30 border-l-4 pl-4 text-muted-foreground italic",t),"data-streamdown":"blockquote",...o,children:e}),(e,t)=>$(e,t));Et.displayName="MarkdownBlockquote";var zt=(0,x.memo)(({children:e,className:t,node:n,...o})=>(0,y.jsx)("sup",{className:k("text-sm",t),"data-streamdown":"superscript",...o,children:e}),(e,t)=>$(e,t));zt.displayName="MarkdownSup";var Dt=(0,x.memo)(({children:e,className:t,node:n,...o})=>(0,y.jsx)("sub",{className:k("text-sm",t),"data-streamdown":"subscript",...o,children:e}),(e,t)=>$(e,t));Dt.displayName="MarkdownSub";var Ot=(0,x.memo)(({children:e,className:t,node:n,...o})=>{if("data-footnotes"in o){let a=s=>{var f,h;if(!(0,x.isValidElement)(s))return!1;let c=Array.isArray(s.props.children)?s.props.children:[s.props.children],d=!1,m=!1;for(let v of c)if(v){if(typeof v=="string")v.trim()!==""&&(d=!0);else if((0,x.isValidElement)(v))if(((f=v.props)==null?void 0:f["data-footnote-backref"])!==void 0)m=!0;else{let I=Array.isArray(v.props.children)?v.props.children:[v.props.children];for(let B of I){if(typeof B=="string"&&B.trim()!==""){d=!0;break}if((0,x.isValidElement)(B)&&((h=B.props)==null?void 0:h["data-footnote-backref"])===void 0){d=!0;break}}}}return m&&!d},i=Array.isArray(e)?e.map(s=>{if(!(0,x.isValidElement)(s))return s;if(s.type===Ge){let d=(Array.isArray(s.props.children)?s.props.children:[s.props.children]).filter(m=>!a(m));return d.length===0?null:{...s,props:{...s.props,children:d}}}return s}):e;return(Array.isArray(i)?i.some(s=>s!==null):i!==null)?(0,y.jsx)("section",{className:t,...o,children:i}):null}return(0,y.jsx)("section",{className:t,...o,children:e})},(e,t)=>$(e,t));Ot.displayName="MarkdownSection";var Ue=e=>(0,x.isValidElement)(e)&&e.props&&typeof e.props=="object"&&"children"in e.props&&typeof e.props.children=="string"?e.props.children:typeof e=="string"?e:"",In=(e,t)=>{let o=Math.floor(t.length/50);return`${e}-${o}`},Bn=({node:e,className:t,children:n,...o})=>{var v,I,B;let r=((v=e==null?void 0:e.position)==null?void 0:v.start.line)===((I=e==null?void 0:e.position)==null?void 0:I.end.line),a=(0,x.useContext)(Te),i=(0,x.useContext)(ve),l=t==null?void 0:t.match(Sn),s=(B=l==null?void 0:l.at(1))!=null?B:"code",c=Ue(n),m=`streamdown-mermaid-${(0,x.useId)()}`,f=s==="mermaid"?In(m,c):m;if(r)return(0,y.jsx)("code",{className:k("rounded bg-muted px-1 py-0.5 sm:px-1.5 font-mono text-xs sm:text-sm whitespace-normal wrap-anywhere",t),"data-streamdown":"inline-code",...o,children:n});if(s==="mermaid"){let N=(0,y.jsx)(ye,{chart:c,config:a,renderId:m},f),H=_e(i,"mermaid");return(0,y.jsxs)("div",{className:k("group relative my-4 h-auto rounded-xl border p-4",t),"data-streamdown":"mermaid-block",children:[H&&(0,y.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,y.jsx)(pt,{chart:c,config:a}),(0,y.jsx)(mt,{chart:c,renderId:m}),(0,y.jsx)(ut,{chart:c,renderId:m})]}),N]})}let h=_e(i,"code");return(0,y.jsx)(Ze,{className:k("overflow-x-auto border-t",t),code:c,"data-language":s,"data-streamdown":"code-block",language:s,preClassName:"overflow-x-auto font-mono text-xs p-4 bg-muted/40 break-all md:break-words whitespace-pre-wrap",children:h&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(Qe,{code:c,language:s}),(0,y.jsx)(et,{})]})})},jt=(0,x.memo)(Bn,(e,t)=>e.className===t.className&&Pe(e.node,t.node)&&Ue(e.children)===Ue(t.children));jt.displayName="MarkdownCode";var qt=(0,x.memo)(nt,(e,t)=>e.className===t.className&&Pe(e.node,t.node));qt.displayName="MarkdownImg";var Wt=(0,x.memo)(({children:e,className:t,node:n,...o})=>{var i;let a=(Array.isArray(e)?e:[e]).filter(l=>l!=null&&l!=="");return a.length===1&&(0,x.isValidElement)(a[0])&&((i=a[0].props.node)==null?void 0:i.tagName)==="img"?(0,y.jsx)(y.Fragment,{children:e}):(0,y.jsx)("p",{className:t,...o,children:e})},(e,t)=>$(e,t));Wt.displayName="MarkdownParagraph";var Xt={ol:Ge,li:yt,ul:vt,hr:kt,strong:Mt,a:xt,h1:Ct,h2:Nt,h3:Pt,h4:Tt,h5:St,h6:It,table:Bt,thead:Lt,tbody:At,tr:$t,th:Ht,td:Rt,blockquote:Et,code:jt,img:qt,pre:({children:e})=>e,sup:zt,sub:Dt,p:Wt,section:Ot};var _t=require("marked"),Ut=e=>{let t=/\[\^[^\]\s]{1,200}\](?!:)/.test(e),n=/\[\^[^\]\s]{1,200}\]:/.test(e);if(t||n)return[e];let o=_t.Lexer.lex(e,{gfm:!0}),r=[],a=[];for(let i=0;i<o.length;i++){let l=o[i],s=l.raw;if(a.length>0){if(r[r.length-1]+=s,l.type==="html"){let c=s.match(/<\/(\w+)>/);if(c){let d=c[1];a[a.length-1]===d&&a.pop()}}continue}if(l.type==="html"&&l.block){let c=s.match(/<(\w+)[\s>]/);if(c){let d=c[1];s.includes(`</${d}>`)||a.push(d)}}if(s.trim()==="$$"&&r.length>0){let c=r.at(-1);if(!c){r.push(s);continue}let d=c.trimStart().startsWith("$$"),m=(c.match(/\$\$/g)||[]).length;if(d&&m%2===1){r[r.length-1]=c+s;continue}}if(r.length>0&&s.trimEnd().endsWith("$$")){let c=r.at(-1);if(!c){r.push(s);continue}let d=c.trimStart().startsWith("$$"),m=(c.match(/\$\$/g)||[]).length,f=(s.match(/\$\$/g)||[]).length;if(d&&m%2===1&&!s.trimStart().startsWith("$$")&&f===1){r[r.length-1]=c+s;continue}}r.push(s)}return r};var Ln=/(!?\[)([^\]]*?)$/,An=/(\*\*)([^*]*?)$/,$n=/(__)([^_]*?)$/,Hn=/(\*\*\*)([^*]*?)$/,Rn=/(\*)([^*]*?)$/,En=/(_)([^_]*?)$/,zn=/(`)([^`]*?)$/,Dn=/(~~)([^~]*?)$/,Se=e=>{let t=(e.match(/```/g)||[]).length;return t>0&&t%2===0&&e.includes(`
`)},On=e=>{let t=/(!?)\[([^\]]+)\]\(([^)]+)$/,n=e.match(t);if(n){let r=n[1]==="!",a=n[2],i=n[3],l=e.lastIndexOf(`${r?"!":""}[${a}](${i}`),s=e.substring(0,l);return r?s:`${s}[${a}](streamdown:incomplete-link)`}let o=e.match(Ln);if(o){if(o[1].startsWith("!")){let a=e.lastIndexOf(o[1]);return e.substring(0,a)}return`${e}](streamdown:incomplete-link)`}return e},jn=e=>{if(Se(e))return e;let t=e.match(An);if(t){let n=t[2];if(!n||/^[\s_~*`]*$/.test(n))return e;let o=e.lastIndexOf(t[1]),a=e.substring(0,o).lastIndexOf(`
`),i=a===-1?0:a+1,l=e.substring(i,o);if(/^[\s]*[-*+][\s]+$/.test(l)&&n.includes(`
`))return e;if((e.match(/\*\*/g)||[]).length%2===1)return`${e}**`}return e},qn=e=>{let t=e.match($n);if(t){let n=t[2];if(!n||/^[\s_~*`]*$/.test(n))return e;let o=e.lastIndexOf(t[1]),a=e.substring(0,o).lastIndexOf(`
`),i=a===-1?0:a+1,l=e.substring(i,o);if(/^[\s]*[-*+][\s]+$/.test(l)&&n.includes(`
`))return e;if((e.match(/__/g)||[]).length%2===1)return`${e}__`}return e},Wn=e=>e.split("").reduce((t,n,o)=>{if(n==="*"){let r=e[o-1],a=e[o+1];if(r==="\\")return t;let i=o;for(let s=o-1;s>=0;s--){if(e[s]===`
`){i=s+1;break}if(s===0){i=0;break}}if(e.substring(i,o).trim()===""&&(a===" "||a==="	"))return t;if(r!=="*"&&a!=="*")return t+1}return t},0),Xn=e=>{if(Se(e))return e;if(e.match(Rn)){let n=-1;for(let a=0;a<e.length;a++)if(e[a]==="*"&&e[a-1]!=="*"&&e[a+1]!=="*"){n=a;break}if(n===-1)return e;let o=e.substring(n+1);if(!o||/^[\s_~*`]*$/.test(o))return e;if(Wn(e)%2===1)return`${e}*`}return e},Gt=(e,t)=>{let n=!1,o=!1;for(let r=0;r<e.length&&r<t;r++){if(e[r]==="\\"&&e[r+1]==="$"){r++;continue}e[r]==="$"&&(e[r+1]==="$"?(o=!o,r++,n=!1):o||(n=!n))}return n||o},_n=e=>e.split("").reduce((t,n,o)=>{if(n==="_"){let r=e[o-1],a=e[o+1];if(r==="\\"||Gt(e,o)||r&&a&&/[\p{L}\p{N}_]/u.test(r)&&/[\p{L}\p{N}_]/u.test(a))return t;if(r!=="_"&&a!=="_")return t+1}return t},0),Un=e=>{if(Se(e))return e;if(e.match(En)){let n=-1;for(let a=0;a<e.length;a++)if(e[a]==="_"&&e[a-1]!=="_"&&e[a+1]!=="_"&&e[a-1]!=="\\"&&!Gt(e,a)){let i=a>0?e[a-1]:"",l=a<e.length-1?e[a+1]:"";if(i&&l&&/[\p{L}\p{N}_]/u.test(i)&&/[\p{L}\p{N}_]/u.test(l))continue;n=a;break}if(n===-1)return e;let o=e.substring(n+1);if(!o||/^[\s_~*`]*$/.test(o))return e;if(_n(e)%2===1){let a=e.match(/\n+$/);return a?`${e.slice(0,-a[0].length)}_${a[0]}`:`${e}_`}}return e},Gn=(e,t)=>{let n=e.substring(t,t+3)==="```",o=t>0&&e.substring(t-1,t+2)==="```",r=t>1&&e.substring(t-2,t+1)==="```";return n||o||r},Fn=e=>{let t=0;for(let n=0;n<e.length;n++)e[n]==="`"&&!Gn(e,n)&&t++;return t},Vn=e=>{if(e.match(/^```[^`\n]*```?$/)&&!e.includes(`
`))return e.endsWith("``")&&!e.endsWith("```")?`${e}\``:e;let n=(e.match(/```/g)||[]).length,o=n%2===1;if(n>0&&n%2===0&&e.includes(`
`)||(e.endsWith("```\n")||e.endsWith("```"))&&n%2===0)return e;let r=e.match(zn);if(r&&!o){let a=r[2];if(!a||/^[\s_~*`]*$/.test(a))return e;if(Fn(e)%2===1)return`${e}\``}return e},Yn=e=>{let t=e.match(Dn);if(t){let n=t[2];if(!n||/^[\s_~*`]*$/.test(n))return e;if((e.match(/~~/g)||[]).length%2===1)return`${e}~~`}return e};var Jn=e=>{if((e.match(/\$\$/g)||[]).length%2===0)return e;let n=e.indexOf("$$");return n!==-1&&e.indexOf(`
`,n)!==-1&&!e.endsWith(`
`)?`${e}
$$`:`${e}$$`},Kn=e=>{let t=0,n=e.match(/\*+/g)||[];for(let o of n){let r=o.length;r>=3&&(t+=Math.floor(r/3))}return t},Zn=e=>{if(Se(e)||/^\*{4,}$/.test(e))return e;let t=e.match(Hn);if(t){let n=t[2];if(!n||/^[\s_~*`]*$/.test(n))return e;if(Kn(e)%2===1)return`${e}***`}return e},Ft=e=>{if(!e||typeof e!="string")return e;let t=e,n=On(t);return n.endsWith("](streamdown:incomplete-link)")?n:(t=n,t=Zn(t),t=jn(t),t=qn(t),t=Xn(t),t=Un(t),t=Vn(t),t=Yn(t),t=Jn(t),t)};var re=require("react/jsx-runtime"),en={harden:[Qt.harden,{allowedImagePrefixes:["*"],allowedLinkPrefixes:["*"],defaultOrigin:void 0,allowDataImages:!0}],raw:Jt.default,katex:[Yt.default,{errorColor:"var(--color-muted-foreground)"}]},tn={gfm:[Kt.default,{}],math:[Zt.default,{singleDollarTextMath:!1}]},Me=(0,U.createContext)(["github-light","github-dark"]),Te=(0,U.createContext)(void 0),ve=(0,U.createContext)(!0),J=(0,U.createContext)({isAnimating:!1}),nn=(0,U.memo)(({content:e,shouldParseIncompleteMarkdown:t,...n})=>{let o=(0,U.useMemo)(()=>typeof e=="string"&&t?Ft(e.trim()):e,[e,t]);return(0,re.jsx)(Vt.default,{...n,children:o})},(e,t)=>e.content===t.content);nn.displayName="Block";var on=(0,U.memo)(({children:e,parseIncompleteMarkdown:t=!0,components:n,rehypePlugins:o=Object.values(en),remarkPlugins:r=Object.values(tn),className:a,shikiTheme:i=["github-light","github-dark"],mermaidConfig:l,controls:s=!0,isAnimating:c=!1,...d})=>{let m=(0,U.useId)(),f=(0,U.useMemo)(()=>Ut(typeof e=="string"?e:""),[e]);return(0,re.jsx)(Me.Provider,{value:i,children:(0,re.jsx)(Te.Provider,{value:l,children:(0,re.jsx)(ve.Provider,{value:s,children:(0,re.jsx)(J.Provider,{value:{isAnimating:c},children:(0,re.jsx)("div",{className:k("space-y-4",a),children:f.map((h,v)=>(0,re.jsx)(nn,{components:{...Xt,...n},content:h,rehypePlugins:o,remarkPlugins:r,shouldParseIncompleteMarkdown:t,...d},`${m}-block-${v}`))})})})})})},(e,t)=>e.children===t.children&&e.shikiTheme===t.shikiTheme&&e.isAnimating===t.isAnimating);on.displayName="Streamdown";0&&(module.exports={ControlsContext,MermaidConfigContext,ShikiThemeContext,Streamdown,StreamdownRuntimeContext,defaultRehypePlugins,defaultRemarkPlugins});
